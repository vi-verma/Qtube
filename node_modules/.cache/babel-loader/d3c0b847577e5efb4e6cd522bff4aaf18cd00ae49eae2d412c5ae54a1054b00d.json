{"ast":null,"code":"var _jsxFileName = \"/Users/vivekverma/Desktop/demo-project/Qtube/src/components/searchMovies/SearchMovies.js\",\n  _s = $RefreshSig$();\nimport CardContainer from '../card/CardContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styles from './SearchMovies.module.css';\nimport { useEffect } from 'react';\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { getSearchMovieList, resetSearchState } from '../../store/reducer/moviesReducer';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchMovies = props => {\n  _s();\n  var _allMoviesList$search3;\n  const allMoviesList = useSelector(state => state.allMoviesList);\n  const dispatchEvent = useDispatch();\n  let [searchParams, setSearchParams] = useSearchParams();\n  const navigation = useNavigate();\n  useEffect(() => {\n    // reset search movies list when search input changes\n    dispatchEvent(resetSearchState());\n\n    // debounce function\n    const getData = setTimeout(() => {\n      fetchMovies(searchParams.get('search'));\n    }, 1000);\n    return () => clearTimeout(getData);\n  }, [searchParams.get('search')]);\n  let fetchMovies = async (key, page) => {\n    if (key.length < 3) return;\n    let pageno = page || 1;\n    try {\n      const response = await axios(`https://api.themoviedb.org/3/trending/all/day?api_key=9a3cb9dfa9766a01f14b910fa0f1ac4a&page=${pageno}&query=${key}`);\n      dispatchEvent(getSearchMovieList(response === null || response === void 0 ? void 0 : response.data));\n    } catch (error) {\n      console.error(error);\n    }\n    ;\n  };\n  const fetchMore = () => {\n    var _allMoviesList$search, _allMoviesList$search2;\n    if (((_allMoviesList$search = allMoviesList.searchMoviesList) === null || _allMoviesList$search === void 0 ? void 0 : _allMoviesList$search.total_pages) <= ((_allMoviesList$search2 = allMoviesList.searchMoviesList) === null || _allMoviesList$search2 === void 0 ? void 0 : _allMoviesList$search2.page)) return;\n    const query = searchParams.get('search');\n    const page = +allMoviesList.searchMoviesList.page + 1;\n    fetchMovies(query, page);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '88%',\n      margin: 'auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexFlow: 'wrap'\n      },\n      children: (_allMoviesList$search3 = allMoviesList.searchMoviesList.list) === null || _allMoviesList$search3 === void 0 ? void 0 : _allMoviesList$search3.map((movie, idx) => {\n        return /*#__PURE__*/_jsxDEV(CardContainer, {\n          onClick: () => navigation(`/movieDetail?id=${movie.id}`),\n          url: movie.poster_path,\n          title: movie.title\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.loadMoreButton,\n      type: \"button\",\n      onClick: fetchMore,\n      children: \"Load more\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s(SearchMovies, \"DON6S3kHv1jU4xncB0z9gQZfF4o=\", false, function () {\n  return [useSelector, useDispatch, useSearchParams, useNavigate];\n});\n_c = SearchMovies;\nexport default SearchMovies;\nvar _c;\n$RefreshReg$(_c, \"SearchMovies\");","map":{"version":3,"names":["CardContainer","useDispatch","useSelector","styles","useEffect","useNavigate","useSearchParams","getSearchMovieList","resetSearchState","axios","SearchMovies","props","allMoviesList","state","dispatchEvent","searchParams","setSearchParams","navigation","getData","setTimeout","fetchMovies","get","clearTimeout","key","page","length","pageno","response","data","error","console","fetchMore","searchMoviesList","total_pages","query","width","margin","display","flexFlow","list","map","movie","idx","id","poster_path","title","loadMoreButton"],"sources":["/Users/vivekverma/Desktop/demo-project/Qtube/src/components/searchMovies/SearchMovies.js"],"sourcesContent":["import CardContainer from '../card/CardContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styles from './SearchMovies.module.css';\nimport { useEffect } from 'react';\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { getSearchMovieList , resetSearchState } from '../../store/reducer/moviesReducer';\nimport axios from 'axios';\n\n\n\nconst SearchMovies = (props) => {\n    const allMoviesList = useSelector((state) => state.allMoviesList);\n    const dispatchEvent = useDispatch();\n    let [searchParams, setSearchParams] = useSearchParams();\n    const navigation = useNavigate();\n\n    useEffect(() => {\n        // reset search movies list when search input changes\n        dispatchEvent(resetSearchState());\n\n        // debounce function\n        const getData = setTimeout(() => {\n            fetchMovies(searchParams.get('search'));\n        }, 1000)\n\n        return () => clearTimeout(getData)\n    }, [searchParams.get('search')]);\n\n    let fetchMovies = async (key, page) => {\n        if(key.length< 3) return;\n\n        let pageno = page || 1;\n        try {\n            const response = await axios(`https://api.themoviedb.org/3/trending/all/day?api_key=9a3cb9dfa9766a01f14b910fa0f1ac4a&page=${pageno}&query=${key}`);\n            dispatchEvent(getSearchMovieList(response?.data))\n\n        } catch (error) {\n            console.error(error)\n        };\n    };\n\n    const fetchMore = () => {\n        if(allMoviesList.searchMoviesList?.total_pages <= allMoviesList.searchMoviesList?.page) return;\n        const query = searchParams.get('search');\n        const page = +allMoviesList.searchMoviesList.page+1;\n        fetchMovies(query, page);\n    };\n\n    return (\n        <div style={{ width: '88%', margin: 'auto' }}>\n            <div style={{ display: 'flex', flexFlow: 'wrap' }}>\n                {allMoviesList.searchMoviesList.list?.map((movie, idx) => {\n                    return <CardContainer\n                        onClick={() => navigation(`/movieDetail?id=${movie.id}`)}\n                        key={idx}\n                        url={movie.poster_path}\n                        title={movie.title}\n                    />\n                })}\n            </div>\n                <button className={styles.loadMoreButton} type='button' onClick={fetchMore}>Load more</button>\n        </div>\n    )\n}\n\nexport default SearchMovies;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}